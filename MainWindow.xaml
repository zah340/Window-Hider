<Window x:Class="StreamHider.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window Hider" Height="620" Width="650"
        Background="#2C2F33"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize"
        Closing="Window_Closing">
    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <!-- Row for Credits -->
        </Grid.RowDefinitions>

        <!-- Title -->
        <TextBlock Grid.Row="0" Text="Recording Window Hider" 
                   FontSize="22" FontWeight="Bold" Foreground="White" 
                   Margin="0,0,0,10" HorizontalAlignment="Center"/>

        <!-- Self Hide Section -->
        <Border Grid.Row="2" Background="#23272A" BorderBrush="#40444B" BorderThickness="1" CornerRadius="5" Margin="0,0,0,15" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                    <TextBlock Text="Self-Hide Hotkey" FontWeight="Bold" Foreground="White" FontSize="14"/>
                    <TextBlock Text="Press key to toggle visibility of THIS app in streams" Foreground="#B9BBBE" FontSize="11"/>
                </StackPanel>
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button x:Name="BindKeyButton" Content="Click to Bind Key: None" 
                            Width="180" Height="30" Click="BindKeyButton_Click"
                            Background="#5865F2" Foreground="White" FontWeight="Bold" BorderThickness="0">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="3">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                    </Button>
                    <TextBlock x:Name="SelfHideStatusText" Text="👁️ Visible" 
                               Foreground="#ED4245" VerticalAlignment="Center" Margin="10,0,0,0" FontWeight="Bold" Width="70" TextAlignment="Center"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Process List -->
        <Border Grid.Row="3" BorderBrush="#40444B" BorderThickness="2" CornerRadius="5">
            <ListView x:Name="ProcessListView" Background="#23272A" 
                      Foreground="White" BorderThickness="0"
                      ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <CheckBox Content="{Binding DisplayName}" 
                                  IsChecked="{Binding IsSelected}"
                                  Foreground="White"
                                  FontSize="13"
                                  Margin="5"
                                  Checked="CheckBox_Checked"
                                  Unchecked="CheckBox_Unchecked">
                            <CheckBox.Style>
                                <Style TargetType="CheckBox">
                                    <Style.Triggers>
                                        <!-- Highlight hidden items -->
                                        <DataTrigger Binding="{Binding IsHidden}" Value="True">
                                            <Setter Property="Foreground" Value="#57F287"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </CheckBox.Style>
                        </CheckBox>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Border>

        <!-- Buttons -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,15">
            <Button x:Name="HideButton" Content="🚫 Hide Selected" Width="140" Height="40" 
                    Margin="8" Click="HideButton_Click" 
                    Background="#5865F2" Foreground="White" FontWeight="Bold" FontSize="13"
                    BorderThickness="0" Cursor="Hand"/>

            <Button x:Name="UnhideButton" Content="✅ Unhide All" Width="140" Height="40" 
                    Margin="8" Click="UnhideButton_Click" 
                    Background="#3BA55D" Foreground="White" FontWeight="Bold" FontSize="13"
                    BorderThickness="0" Cursor="Hand"/>

            <Button x:Name="RefreshButton" Content="🔄 Refresh List" Width="140" Height="40" 
                    Margin="8" Click="RefreshButton_Click" 
                    Background="#FEE75C" Foreground="Black" FontWeight="Bold" FontSize="13"
                    BorderThickness="0" Cursor="Hand"/>
        </StackPanel>

        <!-- Status Bar -->
        <Border Grid.Row="5" Background="#1E2124" CornerRadius="5" Padding="10">
            <TextBlock x:Name="StatusText" Text="Ready - Waiting for action..." 
                       Foreground="#B9BBBE" HorizontalAlignment="Center" 
                       FontSize="12" FontWeight="SemiBold"/>
        </Border>

        <!-- Credits -->
        <TextBlock Grid.Row="6" Text="Made by @zahgerman" 
                   Foreground="#72767D" FontSize="11" HorizontalAlignment="Right" 
                   Margin="0,19,-13,-14" FontStyle="Italic"/>
    </Grid>
</Window>
